<!doctype html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <style>
        body { font-family: "DejaVu Sans","Noto Sans", Arial, sans-serif; font-size: 12px; }
        h1 { margin: 0 0 8px 0; }
        .meta { margin: 4px 0 12px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #999; padding: 6px; }
        th { background: #efefef; }
        .right { text-align: right; }
        .center { text-align: center; }
    </style>
</head>
<body>
<h1>BÁO CÁO THÀNH VIÊN DỰ ÁN</h1>
<div class="meta">
    <div><b>Tên dự án:</b> <span th:text="${projectName}">Project</span></div>
    <div>
        <b>Từ ngày:</b> <span th:text="${fromDate}">01/01/2025</span>
        &nbsp;|&nbsp;
        <b>Đến ngày:</b> <span th:text="${toDate}">31/01/2025</span>
    </div>
    <div><b>Tiến độ:</b> <span th:text="${header.progressSummary}">...</span></div>
    <div><i>Generated At: <span th:text="${generatedAt}">...</span></i></div>
</div>

<table>
    <thead>
    <tr>
        <th>STT</th>
        <th>Tên thành viên</th>
        <th>Task đến deadline (trong kỳ)</th>
        <th>Hoàn thành đúng hạn</th>
        <th>Quá hạn</th>
        <th>Task tự tạo</th>
        <th>Submission</th>
        <th>Đã duyệt</th>
        <th>Từ chối</th>
        <th>Đang chờ</th>
        <th>Tỉ lệ deadline (%)</th>
        <th>Tỉ lệ duyệt (%)</th>
        <th>Điểm Deadline</th>
        <th>Điểm Duyệt</th>
        <th>Điểm Sáng tạo</th>
        <th><b>Tổng điểm</b></th>
        <th>Xếp loại</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="r : ${rows}">
        <td class="center" th:text="${r.stt}">1</td>
        <td th:text="${r.memberName}">Nguyễn Văn A</td>
        <td class="right" th:text="${r.tasksWithDeadlineInRange}">0</td>
        <td class="right" th:text="${r.tasksCompletedOnTime}">0</td>
        <td class="right" th:text="${r.tasksOverdue}">0</td>
        <td class="right" th:text="${r.tasksCreatedInRange}">0</td>
        <td class="right" th:text="${r.submissions}">0</td>
        <td class="right" th:text="${r.approved}">0</td>
        <td class="right" th:text="${r.rejected}">0</td>
        <td class="right" th:text="${r.pending}">0</td>

        <td class="right" th:text="${T(java.lang.Math).round(r.deadlineRate*10000.0)/100.0}">0</td>
        <td class="right" th:text="${T(java.lang.Math).round(r.approvalRate*10000.0)/100.0}">0</td>

        <td class="right" th:text="${T(java.lang.Math).round(r.deadlinePoints*100.0)/100.0}">0</td>
        <td class="right" th:text="${T(java.lang.Math).round(r.approvalPoints*100.0)/100.0}">0</td>
        <td class="right" th:text="${T(java.lang.Math).round(r.creativityPoints*100.0)/100.0}">0</td>
        <td class="right" th:text="${T(java.lang.Math).round(r.totalPoints*100.0)/100.0}">0</td>
        <td class="center" th:text="${r.grade}">Đạt</td>
    </tr>
    </tbody>
</table>
</body>
</html>
